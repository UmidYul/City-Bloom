<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚Äî City Bloom</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <div class="app">
        <header class="site-header">
            <a class="logo" href="/">City Bloom</a>
            <nav class="nav-inline" id="navLinks"></nav>
        </header>

        <main>
            <!-- Admin Header -->
            <div class="card"
                style="margin-bottom:16px;background:linear-gradient(135deg, rgba(36,176,107,0.15), rgba(36,176,107,0.05))">
                <div style="display:flex;align-items:center;gap:14px">
                    <div style="font-size:48px">‚öôÔ∏è</div>
                    <div style="flex:1">
                        <h1 style="margin-bottom:4px">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
                        <div class="muted text-small">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π City Bloom</div>
                    </div>
                </div>
            </div>

            <!-- Quick Stats Dashboard -->
            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px">
                <div class="card" style="text-align:center">
                    <div style="font-size:32px;margin-bottom:8px">üìã</div>
                    <div style="font-size:24px;font-weight:700;color:var(--accent)" id="pendingSubmissionsCount">-</div>
                    <div class="text-small muted">–ù–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫</div>
                </div>
                <div class="card" style="text-align:center">
                    <div style="font-size:32px;margin-bottom:8px">‚úÖ</div>
                    <div style="font-size:24px;font-weight:700;color:var(--accent)" id="approvedSubmissionsCount">-
                    </div>
                    <div class="text-small muted">–û–¥–æ–±—Ä–µ–Ω–æ</div>
                </div>
                <div class="card" style="text-align:center">
                    <div style="font-size:32px;margin-bottom:8px">üë•</div>
                    <div style="font-size:24px;font-weight:700;color:var(--accent)" id="totalUsersCount">-</div>
                    <div class="text-small muted">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </div>
                <div class="card" style="text-align:center">
                    <div style="font-size:32px;margin-bottom:8px">üéÅ</div>
                    <div style="font-size:24px;font-weight:700;color:var(--accent)" id="totalProductsCount">-</div>
                    <div class="text-small muted">–¢–æ–≤–∞—Ä–æ–≤</div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="card" style="margin-bottom:16px">
                <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px">
                    <button id="tabSubmissions" class="tab-btn active">üìã –ó–∞—è–≤–∫–∏</button>
                    <button id="tabProducts" class="tab-btn">üéÅ –¢–æ–≤–∞—Ä—ã</button>
                    <button id="tabUsers" class="tab-btn">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                </div>
            </div>

            <!-- Submissions Tab -->
            <div id="submissionsTab">
                <div class="card" style="margin-bottom:16px">
                    <div style="display:flex;gap:8px;margin-bottom:16px">
                        <button id="btnPending" class="secondary" style="flex:1">üïê –ù–µ –æ—Ü–µ–Ω—ë–Ω–Ω—ã–µ</button>
                        <button id="btnEvaluated" class="ghost" style="flex:1">‚úì –û—Ü–µ–Ω—ë–Ω–Ω—ã–µ</button>
                    </div>

                    <div id="pendingArea">
                        <h3 style="margin-bottom:14px">üïê –û–∂–∏–¥–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏</h3>
                        <div id="pendingTable">
                            <div class="skeleton" style="height:80px;margin-bottom:12px"></div>
                            <div class="skeleton" style="height:80px"></div>
                        </div>
                    </div>

                    <div id="evaluatedArea" style="display:none">
                        <h3 style="margin-bottom:14px">‚úì –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏</h3>
                        <div id="evaluatedTable">
                            <div class="skeleton" style="height:80px;margin-bottom:12px"></div>
                            <div class="skeleton" style="height:80px"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Tab -->
            <div id="productsTab" style="display:none">
                <div class="card" style="margin-bottom:16px">
                    <h2 style="margin-bottom:14px">üéÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h2>

                    <div style="padding:16px;background:var(--input-bg);border-radius:var(--radius);margin-bottom:18px">
                        <h3 style="margin-bottom:14px">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h3>
                        <form id="productForm" enctype="multipart/form-data" style="display:grid;gap:12px">
                            <input id="productTitle" name="title" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" required />
                            <input id="productPrice" name="price" type="number" placeholder="–¶–µ–Ω–∞ –≤ –±–∞–ª–ª–∞—Ö" min="1"
                                required />
                            <input id="productOrganization" name="organization" type="text"
                                placeholder="–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (–∫–∞—Ñ–µ, –º–∞–≥–∞–∑–∏–Ω –∏ —Ç.–¥.)" />
                            <select id="productCategory" name="category"
                                style="padding:14px;border-radius:var(--radius-input);border:1px solid var(--border-light);background:var(--card);font-size:15px">
                                <option value="other">üì¶ –î—Ä—É–≥–æ–µ</option>
                                <option value="food">üçî –ï–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏</option>
                                <option value="entertainment">üé¨ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                <option value="shopping">üõçÔ∏è –ü–æ–∫—É–ø–∫–∏</option>
                                <option value="services">üíº –£—Å–ª—É–≥–∏</option>
                            </select>
                            <input id="productValidDays" name="validDays" type="number"
                                placeholder="–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞ (–¥–Ω–µ–π)" value="30" min="1" />
                            <input id="productQuantity" name="quantity" type="number"
                                placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤" value="0" min="0" required />
                            <div>
                                <label style="display:block;margin-bottom:8px;font-weight:500">üì∑ –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞:</label>
                                <input id="productIcon" name="icon" type="file" accept="image/*" />
                            </div>
                            <button id="addProductBtn" type="button">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                            <div id="productMsg" class="muted text-small"></div>
                        </form>
                    </div>

                    <h3 style="margin-bottom:14px">üì¶ –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h3>
                    <div id="productsList" style="display:grid;gap:12px"></div>
                </div>
            </div>

            <!-- Users Tab (NEW) -->
            <div id="usersTab" style="display:none">
                <div class="card" style="margin-bottom:16px">
                    <h2 style="margin-bottom:14px">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>

                    <!-- Search and Filter -->
                    <div style="margin-bottom:16px">
                        <input type="text" id="userSearch" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ email..."
                            style="margin-bottom:12px" />
                        <div style="display:flex;gap:8px">
                            <button id="filterAll" class="secondary" style="flex:1;font-size:13px">–í—Å–µ</button>
                            <button id="filterAdmin" class="ghost" style="flex:1;font-size:13px">–ê–¥–º–∏–Ω—ã</button>
                            <button id="filterActive" class="ghost" style="flex:1;font-size:13px">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                        </div>
                    </div>

                    <h3 style="margin-bottom:14px">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="usersList">
                        <div class="skeleton" style="height:80px;margin-bottom:12px"></div>
                        <div class="skeleton" style="height:80px;margin-bottom:12px"></div>
                        <div class="skeleton" style="height:80px"></div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div style="text-align:center;padding:24px 0;color:var(--text-muted);font-size:14px">
                <div style="margin-bottom:8px">üåç City Bloom Admin Panel</div>
                <div class="text-small">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π</div>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="/admin.js"></script>
    <script src="/admin-products.js"></script>
</body>

</html>